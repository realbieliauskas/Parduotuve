﻿@using Parduotuve.Services
@inject AuthService AuthService
<MudAppBar>
    <MudButton StartIcon="@Icons.Material.Filled.MenuBook" Color="Color.Inherit" Href="/">Browse</MudButton>
    <MudButton StartIcon="@Icons.Material.Filled.AccountCircle" Color="Color.Inherit" Href="/AdminLogin">Login</MudButton>
@if (AuthService.IsAdmin())
{
    <MudButton StartIcon="@Icons.Material.Filled.Shield" Color="Color.Inherit" Href="/AdminPanel/dsfoiugnfdonhgfodinhdf">Admin dashboard</MudButton>
}
    <MudSpacer/>
    <MudButton StartIcon="@Icons.Material.Filled.ShoppingCart" Color="Color.Inherit" Href="/Cart">Shopping cart</MudButton>
</MudAppBar>
@code {
    protected override void OnInitialized()
    {
        AuthService.OnAuthStateChanged += StateHasChanged; // Subscribe to Auth changes
    }
    public void Dispose()
    {
        AuthService.OnAuthStateChanged -= StateHasChanged; // Unsubscribe to prevent memory leaks
    }
}