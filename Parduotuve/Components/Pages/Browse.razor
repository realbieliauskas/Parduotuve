@page "/Browse"
@using Parduotuve.Data.Repositories
@using Parduotuve.Data.Entities
@inject ISkinRepository _skinRepository
@inject NavigationManager NavManager
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=add_shopping_cart" />

<div style="display:grid;grid-template-columns: 25% 25% 25% 25%; padding:10px">
    @foreach(Skin skin in Skins)
    {
        <div @onclick="@(() => EntryClicked(false,skin.Id))" style="height:100%;width:100%;text-align:center">
            <img src=@skin.SplashUrl style="margin-bottom:10px;margin-top:10px;height:360px;width:200px"/>
            <h4>@skin.Name</h4>
            <p>@skin.ChampionName</p>
            <h3>@skin.Price €</h3>
            <button @onclick="@(() => EntryClicked(true,skin.Id))">
                <span style="padding:10px; display:inline-flex;align-items:center;">
                    <p style="margin:0;margin-right:10px;">Į KREPŠELĮ</p>
                    <span class="material-symbols-outlined">
                        add_shopping_cart
                    </span>
                </span>
            </button>
        </div>
    }
</div>

@code {
    private IEnumerable<Skin> Skins { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Skins = await _skinRepository.GetAllAsync();
    }
    private void EntryClicked(bool cart, int id)
    {
        if(cart)
        {
            throw new NotImplementedException("Should be added to cart");
        }
        NavManager.NavigateTo("/"+id); //should navigate to individual listing URL
    }

}
